### 1. 痛点与动机

- 
- **痛点**：
  - 
  - 用户经常需要回看刚才或几天前看过的视频，但在海量文件的随机播放模式下，一旦切歌，很难再找回刚刚那个视频。
  - 意外关闭软件或误操作导致当前视频丢失，需要快速恢复上下文。
- **动机**：
  - 
  - 提供一个基于**时间线**的短期记忆缓存。
  - 限制列表长度（50个），确保该列表只关注“最近”的活跃内容，避免无限膨胀变得难以管理。

### 2. 功能概要

- 
- **有限队列**：维护一个先进先出（FIFO）的队列，最多保留 **50** 个最近播放过的视频。
- **自动记录**：无论视频是在随机模式、精品列表还是点赞列表中被播放，只要被加载，就会进入此列表。
- **网格展示**：以缩略图形式直观展示视频历史。
- **列表播放模式**：支持从历史记录中连续回看。

### 3. 数据存储

- 
- **独立存储文件**：data/Recent.json
  - 
  - **内容**：存储最近播放视频的有序列表（通常存储文件 Hash 或 路径）。
  - **区别**：不同于 setting.json 的配置或 files.json 的元数据，这是一个纯粹的运行时历史记录文件。
- **数据逻辑**：
  - 
  - **插入/更新**：当一个视频开始播放时：
    - 
    - 若列表中已存在该视频：将其移动到队列最前端（去重并更新时间）。
    - 若列表中不存在：插入到队列最前端。
  - **裁剪**：插入后，若列表长度超过 50，移除队列末尾（最早）的元素。

### 4. UI 说明

#### 4.1 标签页入口

- 
- **位置**：位于 **点赞页面** 标签按钮的后面。
- **样式**：标准页签按钮。

#### 4.2 列表页面 (The Recent Page)

- 
- **布局模式**：**Grid 网格视图**。
  - 
  - 类似于“精品页面”，采用缩略图平铺展示。
  - **排序**：严格按照播放时间倒序排列（第一个是刚刚播放的，最后一个是最早播放的）。
- **交互**：
  - 
  - **双击缩略图**：跳转回播放器页面，并立即开始播放该视频。

### 5. 核心逻辑细节

#### 5.1 播放列表联动

- 
- **上下文切换**：
  - 
  - 软件内部维护多种播放列表状态（随机、点赞、精品、最近）。
  - 当用户在“最近播放列表”页面双击视频时：
    1. 
    2. 播放器加载该视频。
    3. 内部播放列表状态切换为 **“最近列表”**。
    4. **特殊逻辑**：在“最近列表”模式下播放下一个视频，通常意味着播放“历史记录中的下一个（即更早之前的视频）”，或者按照列表顺序从第 1 个播放到第 50 个。

#### 5.2 数据的有效性维护

- 
- 虽然 Recent.json 记录了历史，但文件可能在外部被删除或移动。
- 在渲染列表时（或软件启动刷新时），需要校验 Recent.json 中的条目在 files.json 或磁盘中是否依然存在。
  - 
  - 若对应的文件已彻底丢失（元数据中找不到且磁盘无文件），应从最近列表中静默移除该无效条目，保持列表的清洁。