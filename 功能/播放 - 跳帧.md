1. ### 1. 痛点与动机

   - 
   - **痛点**：
     - 
     - 在浏览长视频（如电影、长录像）时，寻找特定场景或检查视频内容质量非常耗时。
     - 传统快进（2x, 4x）依然需要用户持续关注画面，且容易错过关键瞬间。
     - 拖动进度条虽然快，但无法连续、被动地浏览全片概貌。
   - **动机**：
     - 
     - 提供一种**“切片式”**的自动浏览模式，将视频转化为类似于 PPT 幻灯片的播放形式。
     - 让用户能在极短时间内（如 1-2 分钟）看完一个 2 小时的视频的核心画面。
     - 实现“解放双手”的高效审片。

   ### 2. 功能概要

   - 

   - **切片逻辑**：基于视频总时长，将视频划分为 

     ```
     NN
     ```

      个等间隔的时间点。

     

   - **幻灯片播放**：播放器只展示这 

     ```
     NN
     ```

      个时间点的关键帧。

     

   - **停留机制**：每展示一个画面，停留固定时间（如 2 秒），然后直接跳到下一个时间点，中间过程不播放。

   - **全局生效**：该模式是一个全局状态，一旦开启，切换下一个视频时依然生效，直到用户手动关闭。

   ### 3. Setting 配置与数据存储

   - 

   - **配置文件** (setting.json)：

     - 
     - skip_frame (Object): 核心配置对象。Key 为时长阈值，Value 为分段数量。
     - skip_duration (Integer): 每个画面的停留时间（单位：秒，默认 2 秒）。
     - last_play_mode (String/Enum): 记录上次关闭时的模式（“Normal” 或 “Skip”），用于启动恢复。

   - **skip_frame 配置逻辑**：

     - 
     - **Key 格式**：
       - 
       - s 结尾：秒（例如 "30s"）。
       - m 结尾：分钟（例如 "120m"）。
     - **匹配规则**：向**下**匹配区间。配置定义了“最大时长”及其对应的段数。
     - **特殊值**：0 代表不分段（即该时长区间内正常播放）。
     - **默认兜底**：最大支持到 10000m。

     **示例配置**：

     codeJSON

     

     ```
     "skip_frame": {
       "60s": 0,       // 1分钟以内，不跳帧，正常播放
       "30m": 10,      // 1分钟到30分钟之间，分10段
       "120m": 30,     // 30分钟到2小时之间，分30段
       "10000m": 60    // 2小时以上，分60段
     },
     "skip_duration": 2
     ```

   ### 4. UI 与交互

   #### 4.1 控制按钮

   - 
   - **位置**：位于 **播放模式按钮**（如随机/列表循环）的后面。
   - **样式（图标切换）**：
     - 
     - **正常模式时**：显示“向右箭头”（▶ Play Icon），提示点击可切换到跳帧模式（或显示特定图标表示当前是正常，点击变跳帧，这里根据描述，图标应反映**当前状态**或**点击后的功能**，通常设计为显示**当前模式**的图标）。
       - 
       - *根据描述修正*：
         - 
         - **当前为跳帧模式时**：图标显示为 **等距离的三条竖线**（类似 |||），表示切片。
         - **当前为正常模式时**：图标显示为 **向右指的箭头**（类似 ➡ 或 ▶）。

   #### 4.2 模式切换行为

   - 

   - **即时生效**：

     - 
     - 用户在视频播放的任意进度点击切换按钮。
     - **从正常 -> 跳帧**：立即从当前时间点开始，按切片逻辑播放下一个最近的切片帧。
     - **从跳帧 -> 正常**：立即从当前显示的切片时间点开始，恢复正常的连续播放。

   - **切片计算基准**：

     - 

     - 始终基于**视频总时长**进行 

       ```
       NN
       ```

        等分。

       

     - **不是**对剩余时长分 

       ```
       NN
       ```

        段。

       

     - *例如*：视频 60 分钟，分 60 段（每段 1 分钟）。若用户在第 10 分钟切换到跳帧模式，下一个播放点就是第 11 分钟，而不是把剩下的 50 分钟重新分 60 段。

   ### 5. 核心逻辑细节

   #### 5.1 状态持久化

   - 
   - 该模式的选择（跳帧 vs 正常）具有**粘性**。
   - **记录时机**：用户点击切换按钮时写入 setting.json（或内存标记，退出时写入）。
   - **应用范围**：
     - 
     - **切歌**：播放下一个视频时，自动继承当前的模式。
     - **重启**：软件下次启动时，读取 setting.json，恢复上一次的播放模式。

   #### 5.2 视口适配

   - 
   - 在跳帧模式下，由于画面是静态跳转的，依然遵循全局的 **视频窗口自适应方案**（即小于 720p 居中填充，大于视口缩小适应等）。

   ### 6. 总结流程图

   codeMermaid

   

   ```
   graph TD
       A[开始播放视频] --> B{检查当前模式}
       B -- 正常模式 --> C[连续播放帧]
       B -- 跳帧模式 --> D[读取 setting.json 计算分段数 N]
       
       D --> E[计算时间间隔 Interval = 总时长 / N]
       E --> F[播放时间点 T 的画面]
       F --> G[停留 skip_duration 秒 (如2秒)]
       G --> H[跳转到 T + Interval]
       H --> F
       
       I[用户点击切换按钮] --> J{切换到什么?}
       J -- 跳帧模式 --> K[更新图标为三竖线]
       K --> L[保持当前进度 T, 进入跳帧循环]
       J -- 正常模式 --> M[更新图标为右箭头]
       M --> N[保持当前进度 T, 恢复连续播放]
       
       O[软件关闭] --> P[保存当前模式到 setting.json]
   ```