### 1. 痛点与动机

- 
- **痛点**：
  - 
  - **低分低辨率视频**：早期的 360p 或 480p 视频如果按原始尺寸显示，播放器窗口会变得极小，导致进度条、控制按钮等 UI 元素挤成一团，无法正常操作。
  - **超高分辨率视频**：4K 或 8K 视频如果按原始尺寸显示，窗口会超出显示器边界，用户无法看到完整的画面和控制栏。
  - **体验割裂**：在不同分辨率的视频之间切换时，窗口忽大忽小，缺乏稳定感。
- **动机**：
  - 
  - 设定一个**“最小可用尺寸”**（720p），确保无论视频多模糊，播放器 UI 始终处于舒适的可操作大小。
  - 设定**“最大边界”**，防止窗口溢出。
  - 智能适配，平衡画质还原与界面可用性。

### 2. 功能概要

- 
- **视口定义**：指软件界面中用于渲染视频画面的核心区域（不包含标题栏、侧边栏等外部框架，但在计算窗口总大小时会联动）。
- **三级适配策略**：根据视频原始分辨率（Source Resolution）与视口标准分辨率的对比，自动执行“保底放大”、“封顶限制”或“原始呈现”。
- **Content 渲染模式**：在视口尺寸与视频尺寸不一致时，保持视频原始长宽比，在视口内居中显示（留黑边），绝不拉伸变形。

### 3. 核心适配逻辑

系统在加载视频元数据后，根据以下优先级决定视口的大小：

#### 3.1 情况 A：低分辨率视频 (Small Resolution)

- 
- **条件**：视频原始分辨率 < **720p** (通常指高度 < 720 像素，或整体像素数小于标准值)。
- **动作**：
  - 
  - **强制设定视口**：将视口大小锁定为 **720p** 标准尺寸。
  - **画面填充**：视频采用 **Content Mode**（包含模式）。
    - 
    - 视频居中。
    - 保持长宽比缩放以适应视口（通常是放大显示，或者原大居中留黑边，取决于具体渲染实现，文档倾向于“填充视口”即放大至一边贴合）。
- **目的**：保证 UI 控件有足够的空间排列。

#### 3.2 情况 B：超大分辨率视频 (Oversized Resolution)

- 
- **条件**：视频原始分辨率 > **当前屏幕/视口允许的最大分辨率**（Max Viewport Size）。
- **动作**：
  - 
  - **强制设定视口**：将视口大小限制为 **最大分辨率**。
  - **画面填充**：视频缩小以适应视口（Content Mode）。
- **目的**：防止软件窗口爆出屏幕之外。

#### 3.3 情况 C：标准分辨率视频 (Standard Resolution)

- 
- **条件**：720p <= 视频原始分辨率 <= 最大分辨率。
- **动作**：
  - 
  - **原始匹配**：视口大小 = 视频原始分辨率。
  - **画面填充**：1:1 像素点对点显示，无缩放，最清晰。

### 4. 旋转场景的特殊处理

虽然文档主要描述分辨率适配，但结合**视频旋转功能**，自适应逻辑需包含以下隐含行为：

- 
- 当视频发生旋转（如 90度/270度）时，视频的“宽度”和“高度”在逻辑上互换。
- 自适应计算应基于**旋转后**的实际视觉尺寸进行判定。

### 5. 总结











| 场景     | 视频原始尺寸 | 最终视口尺寸   | 画面渲染方式             |
| -------- | ------------ | -------------- | ------------------------ |
| **过小** | < 720p       | **固定 720p**  | 放大/居中 (Content Mode) |
| **正常** | 720p ~ Max   | **= 视频尺寸** | 1:1 原始显示             |
| **过大** | > Max        | **固定 Max**   | 缩小适应 (Content Mode)  |