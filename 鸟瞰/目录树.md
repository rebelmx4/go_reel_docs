### 1. 目录结构概览 (File System Structure)

```
data/
├── setting.json                  # 全局配置文件
├── files.json                    # 视频元数据数据库
├── tags.json                     # 标签定义库
├── recent.json                   # 最近播放历史
├── covers/                       # 封面存储 (平铺结构)
│   ├── a1b2c3d4e5_d.webp         # [情况1] 默认封面 (系统生成的)
│   ├── a1b2c3d4e5.webp           # [情况1] 手动封面 (用户设置的，优先级高于 _d)
│   └── f6g7h8i9j0_d.webp         # [情况2] 仅有默认封面
├── tag_images/                   # 标签封面存储目录
│   ├── 1001.webp                 # 以 TagID 命名，避免冲突
│   └── 2005.webp
└── screenshots/                  # 截图与录制片段
    ├── a1/                       # 【分层】Hash 前两位
    │   └── a1b2c3d4e5/           # 【内容】完整 Hash 文件夹
    │       ├── 001500_m.webp     # 1.5秒 手动截图 (Manual)
    │       ├── 032000_a.webp     # 32秒 自动截图 (Auto)
    │       └── v_1716889200.mp4  # 录制片段
    ├── f6/                       # 【分层】Hash 前两位
    │   └── f6g7h8i9j0/
    │       ├── 005000_m.webp     # 5秒 手动截图
    │       ├── 012000_a.webp     # 12秒 自动截图
    │       └── 145000_a.webp     # 1分25秒 自动截图
    └── ...
```

data目录位于软件根目录下



### 2. JSON 文件内容实例

#### A. setting.json (配置)

```json
{
  "paths": {
    "video_source": "D:/Videos/MyCollection",         // 视频源根目录
    "pending_delete_path": "D:/Videos/Trash_Bin",     // 待删除目录 (软删除)
    "processed_path": "D:/Videos/Edited_Done",        // 裁剪后的原片归档
    "screenshot_export_path": "C:/Users/Admin/Desktop/Export" // 截图导出目录
  },
  "playback": {
    "global_volume": 80,             // 全局音量 (0-100)
    "like_decay_rate": 0.2           // 点赞衰减系数
  },
  "skip_frame": {                    // 跳帧播放配置
    "skip_duration": 2,              // 每帧停留2秒
    "rules": {
      "60s": 0,                      // 1分钟内: 正常播放 (0段)
      "30m": 10,                     // 1-30分钟: 分10段
      "120m": 30,                    // 30-120分钟: 分30段
      "10000m": 60                   // 2小时以上: 分60段
    }
  },
  "key_bindings": {
     "view_nav": {                    // -------- [1-6] 列表/数据源切换 --------
      "list_recent": "1",            // 切换到: [最近播放] 历史记录
      "list_newest": "2",            // 切换到: [最新入库] 按修改时间倒序
      "list_search": "3",            // 切换到: [文件名搜索] 激活搜索框
      "list_random": "4",            // 切换到: [随机推荐] 猜你喜欢
      "list_liked": "5",             // 切换到: [点赞列表] 评分较高的
      "list_elite": "6"              // 切换到: [精品列表] 手动精选/收藏
    },

    "play_control": {                // -------- [WASD] 播放控制 --------
      "toggle_play": "Space",        // 播放/暂停
      "step_backward": "A",          // 后退 (步进)
      "step_forward": "D",           // 前进 (步进)
      "volume_up": "W",              // 音量 + (W向上)
      "volume_down": "S",            // 音量 - (S向下)
      "rotate_video": "Alt+R"        // 旋转视频 (顺时针旋转)
    },

    "capture": {                     // -------- [E/R] 采集与录制 --------
      "screenshot": "E",                          // 截图 (生成 Hash_i.webp)
      "export_screenshot": "Ctrl+E",               // 已设置过截图旋转的话，无须确认直接导出 (另存为/外部使用)
      "export_screenshot_with_dialog": "Alt+E",  // 强制弹出设置截图旋转弹窗 (另存为/外部使用)
      "record_clip": "R",                         // 开始/停止录制片段
      "cancel_record": "Shift+R"                  // 取消当前录制 (不保存)
    },

    "interact": {                    // -------- [F] 评分与反馈 --------
      "like": "F",                   // 点赞 (Pay respects / 热度+)
      "favorite": "Shift+F",         // 收藏 (加入收藏夹)
      "dislike": "G"                 // 不喜欢/降权 (放在F旁边)
    },

    "edit_tag": {                    // -------- [Q/T] 剪辑与标签 --------
      "toggle_track": "Tab",         // 唤出/隐藏 底部剪辑轨道
      "cut_segment": "Q",            // 剪一刀 (分割片段)
      "merge_segments": "Shift+Q",   // 合并选中片段 
      
      "create_text": "T",            // 创建文本标签 (Text)
      "assign_tag": "Shift+T",       // 唤出分配标签菜单
      "quick_tag_1": "Alt+1",        // 快速分配常用标签组1
      "quick_tag_2": "Alt+2"         // 快速分配常用标签组2
    },

    "system": {                      // -------- 系统与通用 --------
      "refresh": "F5",               // 刷新元数据/界面
      "soft_delete": "Ctrl+Delete"  // 软删除文件 (移入pending_delete_path目录)
       "back_to_player": "Esc"        // 从列表返回当前播放器视图
    }
  }
}
```

#### B. files.json (视频元数据)

核心数据库，只有产生“价值”的视频才会被记录。Key 是文件的 Hash。

```json
{
  "a1b2c3d4e5": {
    "paths": [                       // 支持多路径 (内容重复的文件)
      "./Travel/Japan_vlog.mp4",	 // 相对video_source的相对路径
      "./Japan_vlog_copy.mp4"
    ],
    "like_count": 5.8,               // 点赞热度
    "is_favorite": true,             // 收藏/精品状态
    "rotation": 90,                  // 播放时的旋转角度 (0/90/180/270)
    "screenshot_rotation": 90,       // 截图导出的旋转角度 (0/90/180/270/null) (0 表示用户已确认不旋转，null表示用户未设置过旋转)
    "tags": [                       // 纯数字 ID 列表
      1001, 
      2005
    ]
  },
  "f6g7h8i9j0": {
    "paths": [
      "./Anime/Ep01.mkv"
    ],
    "like_count": 0,                
    "is_favorite": false,
    "rotation": 0,
    "screenshot_rotation": null,     // 未单独设置
    "tags": []                      // 无标签
  }
}
```

#### C. tags.json (标签库)

统一数据结构，按分组嵌套。

```json
{
  "风景": [
    {
      "id": 1001,						// 图片是tag_images目录下同名文件（1001.webp），图片路径不做记录
      "texts": ["富士山", "日落", "雪景"] 	
    },
    {
      "id": 1002,
      "texts": ["海滩"]
    }
  ],
  "人物": [
    {
      "id": 2005,						// 图片是tag_images目录下同名文件（2005.webp），图片路径不做记录
      "texts": ["侧脸特写", "微笑"]
    },
    {
      "id": 2006,
      "texts": ["背影"]
    }
  ]
}
```

#### D. Recent.json (历史记录)

简单的路径列表，按照播放时间倒序排列（最新的在最前）。

```json
[
  "D:/Videos/MyCollection/Anime/Ep01.mkv",
  "D:/Videos/MyCollection/Travel/Japan_vlog.mp4",
  "D:/Videos/MyCollection/Documentary/Space.mp4"
  // 最多保留 50 条
]
```
